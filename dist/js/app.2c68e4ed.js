(function(){"use strict";var t={588:function(t,e,n){var r=n(6848),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[!t.parseLink||t.invalidLink?e("div",{staticClass:"parse-form"},[e("input",{ref:"inputLink",attrs:{type:"text",placeholder:"Link"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.parse.apply(null,arguments)}}}),e("button",{on:{click:t.parse}},[t._v("Parse")]),t.invalidLink?e("div",{staticClass:"invalid-link"},[t._v(" Invalid Link. Please enter a valid link. ")]):t._e()]):t._e(),!t.invalidLink&&t.loading?e("div",{staticClass:"loading-link"},[t._v("loading...")]):t._e(),!t.parseLink||t.invalidLink||t.loading?t._e():[e("ParseInfo",{attrs:{cards:t.cards,parseLink:t.parseLink}}),e("div",{staticClass:"sorting"},[e("div",{staticClass:"sorting-btn",class:{active:"price"===t.sortBy},on:{click:function(e){t.sortBy="price"}}},[t._v(" By Price ")]),e("div",{staticClass:"sorting-btn",class:{active:"name"===t.sortBy},on:{click:function(e){t.sortBy="name"}}},[t._v(" By Name ")]),e("div",{staticClass:"sorting-btn",class:{active:"reset"===t.sortBy},on:{click:function(e){t.sortBy="reset"}}},[t._v(" Reset ")])]),42===t.sortedCards.length||0!==t.currentPage?e("div",{staticClass:"pagination"},[e("button",{staticClass:"pagination-btn",attrs:{disabled:0===t.currentPage},on:{click:t.prevPage}},[t._v(" Prev ")]),e("button",{staticClass:"pagination-btn",on:{click:t.nextPage}},[t._v("Next")])]):t._e(),e("div",{staticClass:"card-list"},t._l(t.sortedCards,(function(n,r){return e("div",{key:r,staticClass:"card"},[e("div",{staticClass:"card__main"},[e("strong",{staticClass:"card__number"},[t._v(t._s(r+1))]),t.getElement(n,"img")?e("div",{staticClass:"card__img"},[e("img",{attrs:{src:t.getAttribute(t.getElement(n,"img"),"data-src"),alt:t.getAttribute(t.getElement(n,"img"),"alt")}})]):t._e(),t._l(t.getText(n,"p"),(function(n,r){return e("p",{key:r,class:{card__name:!0,"card__name--first":0===r}},[t._v(" "+t._s(n)+" ")])})),e("p",{staticClass:"card__price"},[t._v("â‚¬ "+t._s(t.getPrice(n,"span")))])],2)])})),0),42===t.sortedCards.length?e("div",{staticClass:"pagination"},[e("button",{staticClass:"pagination-btn",attrs:{disabled:0===t.currentPage},on:{click:t.prevPage}},[t._v(" Prev ")]),e("button",{staticClass:"pagination-btn",on:{click:t.nextPage}},[t._v("Next")])]):t._e()]],2)},i=[],s=n(3979),o=n.n(s),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"parse-info"},[e("p",[t._v(" Link: "),e("a",{attrs:{href:t.parseLink}},[t._v(" "+t._s(t.parseLink)+" ")])]),e("p",[t._v("Cards Amount: "+t._s(t.cards.length))]),e("p",[t._v("Parsing Time: "+t._s(new Date))])])},l=[],u={name:"ParseInfo",props:{cards:{type:Array,default:()=>[]},parseLink:{type:String,default:""}}},d=u,p=n(1656),g=(0,p.A)(d,c,l,!1,null,null,null),v=g.exports,f=n(4373),h={name:"App",components:{ParseInfo:v},data(){return{cards:[],sortedCards:[],parseLink:"",sortBy:"reset",readyToParse:!1,invalidLink:!1,loading:!1,currentPage:0}},watch:{sortBy(t){this.sortedCards="price"===t?[...this.cards].sort(((t,e)=>{const n=parseFloat(this.getPrice(t,"span")),r=parseFloat(this.getPrice(e,"span"));return n-r})):"name"===t?[...this.cards].sort(((t,e)=>this.getText(t,"p")[1].localeCompare(this.getText(e,"p")[1],"ru"))):[...this.cards]}},methods:{async parseData(){try{const t=await f.A.get(this.parseLink);if(!t||!t.data)throw new Error("Invalid response");this.invalidLink=!1;const e=t.data,n=new(o())(e),r=n.findAll("div",{class:"c-tile"});this.loading=!1,console.log("loaded"),this.cards=r,this.sortedCards=[...r]}catch(t){this.invalidLink=!0}},getText(t,e){const n=t.findAll(e),r=n.map((t=>t.text));return r},getElement(t,e){return t.find(e)},getElements(t,e){return[]},getAttribute(t,e){const n=t.attrs;return n?.[e]||""},getPrice(t,e){const n=t.find(e),r=n?n.text:"",a=r.replace(/[^0-9.]/g,"");return a},parse(){this.loading=!0,console.log("loading..."),this.parseLink=this.$refs.inputLink.value,this.parseData(),this.readyToParse=!0},nextPage(){this.parseLink.includes("?start")?this.parseLink=this.parseLink.replace(/(\?start=\d+)$/,`?start=${parseInt(42*this.currentPage,10)+42}`):0===this.currentPage?this.parseLink+="?start=42":this.parseLink+="?start="+42*this.currentPage,this.currentPage++,this.loading=!0,this.parseData()},prevPage(){this.parseLink.includes("?start")?this.parseLink=this.parseLink.replace(/(\?start=\d+)$/,"?start="+(parseInt(42*this.currentPage,10)-42)):this.parseLink+="?start="+42*this.currentPage,this.currentPage--,this.loading=!0,this.parseData()}}},k=h,_=(0,p.A)(k,a,i,!1,null,null,null),y=_.exports;r.Ay.config.productionTip=!1,new r.Ay({render:t=>t(y)}).$mount("#app")}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,i){if(!r){var s=1/0;for(u=0;u<t.length;u++){r=t[u][0],a=t[u][1],i=t[u][2];for(var o=!0,c=0;c<r.length;c++)(!1&i||s>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(o=!1,i<s&&(s=i));if(o){t.splice(u--,1);var l=a();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[r,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,i,s=r[0],o=r[1],c=r[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var u=c(n)}for(e&&e(r);l<s.length;l++)i=s[l],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},r=self["webpackChunkkypca4"]=self["webpackChunkkypca4"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(588)}));r=n.O(r)})();
//# sourceMappingURL=app.2c68e4ed.js.map